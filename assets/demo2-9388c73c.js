var j=Object.defineProperty;var D=(o,e,s)=>e in o?j(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var c=(o,e,s)=>(D(o,typeof e!="symbol"?e+"":e,s),s),O=(o,e,s)=>{if(!e.has(o))throw TypeError("Cannot "+s)};var t=(o,e,s)=>(O(o,e,"read from private field"),s?s.call(o):e.get(o)),n=(o,e,s)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,s)},r=(o,e,s,i)=>(O(o,e,"write to private field"),i?i.call(o,s):e.set(o,s),s);import{T as N,V as y,R as $,a as k,P as q,M as G,g as f,C as W,G as V}from"./index-1d7990e3.js";const X=`#define GLSLIFY 1
attribute vec2 uv;attribute vec2 position;uniform vec2 uResolution;uniform vec2 uTextureResolution;varying vec2 vUv;vec2 resizeUvCover(vec2 uv,vec2 size,vec2 resolution){vec2 ratio=vec2(min((resolution.x/resolution.y)/(size.x/size.y),1.0),min((resolution.y/resolution.x)/(size.y/size.x),1.0));return vec2(uv.x*ratio.x+(1.0-ratio.x)*0.5,uv.y*ratio.y+(1.0-ratio.y)*0.5);}void main(){vUv=resizeUvCover(uv,uTextureResolution,uResolution);gl_Position=vec4(position,0,1);}`,J=`precision highp float;
#define GLSLIFY 1
uniform float uTime;uniform sampler2D uTexture;uniform vec2 uMouse;uniform vec2 uMouseIntro;uniform float uIntro;uniform float uRadius;uniform float uStrength;uniform float uBulge;varying vec2 vUv;vec2 bulge(vec2 uv,vec2 center){uv-=center;float dist=length(uv)/uRadius;float distPow=pow(dist,4.);float strengthAmount=uStrength/(1.0+distPow);uv*=(1.-uBulge)+uBulge*strengthAmount;uv+=center;return uv;}void main(){vec2 mixMouse=mix(uMouseIntro,uMouse,uIntro);vec2 bulgeUV=bulge(vUv,mixMouse);vec4 tex=texture2D(uTexture,bulgeUV);gl_FragColor.rgb=tex.rgb;gl_FragColor.a=1.0;}`;class K{constructor(){c(this,"load",(e,s)=>new Promise(i=>{const u=[];for(let l=0;l<e.length;l++){const{name:p,texture:B}=e[l];B&&!this.assets[p]&&u.push(this.loadTexture(B,p,s))}Promise.all(u).then(()=>i())}));this.assets={}}get(e){return this.assets[e]}loadTexture(e,s,i){return this.assets[s]||(this.assets[s]={}),new Promise(u=>{const l=new Image,p=new N(i);l.onload=()=>{p.image=l,this.assets[s]=p,u(l)},l.src=e})}}const Y=new K;function P(){return"standalone"in navigator||window.matchMedia("(pointer: coarse)").matches?!0:window.matchMedia("(pointer: fine)").matches?!1:"ontouchstart"in window||navigator.maxTouchPoints>0}class Q{constructor(){c(this,"entries",{});c(this,"observer");c(this,"onElementObserved",e=>{e.forEach(s=>{const i=s.target.dataset.intersectId;i&&this.entries[i]&&s.isIntersecting&&this.entries[i].method(s)})});this.observer=new IntersectionObserver(this.onElementObserved,{threshold:0})}observe(e,s,i){this.entries[e]={el:s,method:i},this.observer.observe(s)}unobserve(e,s){this.observer.unobserve(s),delete this.entries[e]}}const Z=new Q;var a,b,R,h,m,M,T,L,x,d,z;class ee{constructor({el:e,src:s,index:i,guiObj:u}){n(this,a,void 0);n(this,b,void 0);n(this,R,void 0);n(this,h,void 0);n(this,m,new y(0,0));n(this,M,void 0);n(this,T,!0);n(this,L,void 0);n(this,x,void 0);n(this,d,void 0);n(this,z,void 0);c(this,"intro",()=>{let e=0;t(this,x)===2?e=.3:t(this,x)===0&&(e=.8),f.delayedCall(e,()=>{t(this,a).parentNode.parentNode.classList.add("is-visible")}),this.tlBulge=f.fromTo(t(this,h).uniforms.uBulge,{value:2},{value:0,duration:2,ease:"expo.out",onComplete:()=>{},delay:e}),f.to(t(this,h).uniforms.uIntro,{value:1,duration:3,delay:e}),t(this,d)&&(f.to(t(this,h).uniforms.uBulge,{value:1,duration:1,delay:1}),t(this,m).x=.5,t(this,m).y=.5)});c(this,"render",e=>{t(this,h)&&(t(this,h).uniforms.uMouse.value=t(this,m),t(this,b).render({scene:t(this,R)}))});c(this,"mouseMove",e=>{if(!t(this,T))return;r(this,M,t(this,a).getBoundingClientRect());let s=t(this,d)?e.touches[0].pageX:e.clientX,i=t(this,d)?e.touches[0].pageY:e.clientY;const u=(s-t(this,M).left)/t(this,a).offsetWidth,l=1-(i-t(this,M).top+window.scrollY)/t(this,a).offsetHeight;t(this,m).x=f.utils.clamp(0,1,u),t(this,m).y=f.utils.clamp(0,1,l)});c(this,"handleMouseEnter",()=>{var e;t(this,T)&&((e=this.tlBulge)==null||e.kill(),f.fromTo(t(this,h).uniforms.uBulge,{value:0},{value:1,duration:1,ease:"expo.out"}))});c(this,"handleMouseLeave",()=>{t(this,T)&&f.to(t(this,h).uniforms.uBulge,{value:0,duration:1,ease:"expo.out"})});c(this,"resize",()=>{const e=t(this,a).parentNode.offsetWidth,s=t(this,a).parentNode.offsetHeight;t(this,b).setSize(e,s),r(this,M,t(this,a).getBoundingClientRect()),t(this,h)&&(t(this,h).uniforms.uResolution.value=new y(e,s)),r(this,d,P())});r(this,a,e),r(this,L,s),r(this,x,i),r(this,z,u),this.setScene(),t(this,a).dataset.intersectId=i,r(this,d,P()),t(this,d)&&document.body.classList.add("is-touch")}get type(){return"card"}get program(){return t(this,h)}async setScene(){r(this,b,new $({dpr:Math.min(window.devicePixelRatio,2),canvas:t(this,a),width:t(this,a).offsetWidth,height:t(this,a).offsetHeight}));const{gl:e}=t(this,b);await Y.load([{name:`image_${t(this,x)}`,texture:`./img/${t(this,L)}`}],e),e.clearColor(1,1,1,1),this.resize();const s=new k(e),i=Y.get(`image_${t(this,x)}`);r(this,h,new q(e,{vertex:X,fragment:J,uniforms:{uTime:{value:0},uTexture:{value:i},uTextureResolution:{value:new y(i.image.width,i.image.height)},uResolution:{value:new y(e.canvas.offsetWidth,e.canvas.offsetHeight)},uMouse:{value:t(this,m)},uMouseIntro:{value:new y(.5,0)},uIntro:{value:0},uBulge:{value:0},uRadius:{value:t(this,z).radius},uStrength:{value:t(this,z).strength}}})),r(this,R,new G(e,{geometry:s,program:t(this,h)})),this.events(),Z.observe(t(this,x),t(this,a),this.intro)}events(){t(this,d)||(t(this,a).addEventListener("mouseenter",this.handleMouseEnter,!1),t(this,a).addEventListener("mouseleave",this.handleMouseLeave,!1))}}a=new WeakMap,b=new WeakMap,R=new WeakMap,h=new WeakMap,m=new WeakMap,M=new WeakMap,T=new WeakMap,L=new WeakMap,x=new WeakMap,d=new WeakMap,z=new WeakMap;var C;class te{constructor(e){n(this,C,void 0);r(this,C,e);const s=t(this,C).innerHTML.split("");t(this,C).innerHTML="",s.forEach(i=>{const u=document.createElement("span");u.classList.add("char"),u.innerHTML=i,t(this,C).appendChild(u)})}get type(){return"text"}}C=new WeakMap;const se=`#define GLSLIFY 1
attribute vec2 uv;attribute vec2 position;uniform vec2 uResolution;varying vec2 vUv;void main(){vUv=uv;gl_Position=vec4(position,0,1);}`,ie=`precision highp float;
#define GLSLIFY 1
uniform vec3 uColor1;uniform vec3 uColor2;uniform float uTime;uniform float uScroll;varying vec2 vUv;vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec2 fade(vec2 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec2 P){vec4 Pi=floor(P.xyxy)+vec4(0.0,0.0,1.0,1.0);vec4 Pf=fract(P.xyxy)-vec4(0.0,0.0,1.0,1.0);Pi=mod289(Pi);vec4 ix=Pi.xzxz;vec4 iy=Pi.yyww;vec4 fx=Pf.xzxz;vec4 fy=Pf.yyww;vec4 i=permute(permute(ix)+iy);vec4 gx=fract(i*(1.0/41.0))*2.0-1.0;vec4 gy=abs(gx)-0.5;vec4 tx=floor(gx+0.5);gx=gx-tx;vec2 g00=vec2(gx.x,gy.x);vec2 g10=vec2(gx.y,gy.y);vec2 g01=vec2(gx.z,gy.z);vec2 g11=vec2(gx.w,gy.w);vec4 norm=taylorInvSqrt(vec4(dot(g00,g00),dot(g01,g01),dot(g10,g10),dot(g11,g11)));g00*=norm.x;g01*=norm.y;g10*=norm.z;g11*=norm.w;float n00=dot(g00,vec2(fx.x,fy.x));float n10=dot(g10,vec2(fx.y,fy.y));float n01=dot(g01,vec2(fx.z,fy.z));float n11=dot(g11,vec2(fx.w,fy.w));vec2 fade_xy=fade(Pf.xy);vec2 n_x=mix(vec2(n00,n01),vec2(n10,n11),fade_xy.x);float n_xy=mix(n_x.x,n_x.y,fade_xy.y);return 2.3*n_xy;}void main(){float noise=cnoise(vUv*1.+uScroll+sin(uTime/10.));vec3 color=mix(uColor1,uColor2,noise);gl_FragColor.rgb=color;gl_FragColor.a=1.0;}`;var I,S,_,g,E,F,H;class oe{constructor({el:e}){n(this,I,void 0);n(this,S,void 0);n(this,_,void 0);n(this,g,void 0);n(this,E,void 0);n(this,F,void 0);n(this,H,void 0);c(this,"render",e=>{t(this,g)&&(t(this,g).uniforms.uTime.value=e,t(this,S).render({scene:t(this,_)}))});c(this,"scroll",e=>{t(this,g).uniforms.uScroll.value=e*2});c(this,"resize",()=>{const e=window.innerWidth,s=window.innerHeight;t(this,S).setSize(e,s),t(this,g)&&(t(this,g).uniforms.uResolution.value=new y(e,s)),r(this,E,P())});r(this,I,e),this.setScene(),r(this,E,P())}get type(){return"background"}get program(){return t(this,g)}async setScene(){r(this,S,new $({dpr:Math.min(window.devicePixelRatio,2),canvas:t(this,I),width:window.innerWidth,height:window.innerHeight}));const{gl:e}=t(this,S);e.clearColor(1,1,1,1),this.resize();const s=new k(e);r(this,g,new q(e,{vertex:se,fragment:ie,uniforms:{uTime:{value:0},uScroll:{value:0},uColor1:{value:new W("#2DA7E3")},uColor2:{value:new W("#8049E3")},uResolution:{value:new y(e.canvas.offsetWidth,e.canvas.offsetHeight)}}})),r(this,_,new G(e,{geometry:s,program:t(this,g)}))}}I=new WeakMap,S=new WeakMap,_=new WeakMap,g=new WeakMap,E=new WeakMap,F=new WeakMap,H=new WeakMap;const ne=["image-7.jpg","image1.png","image-2.jpg"];var v,A,w,U;class re{constructor(){n(this,v,void 0);n(this,A,void 0);n(this,w,{bulge:0,strength:1.1,radius:.95});n(this,U,void 0);c(this,"handleRAF",e=>{for(let s=0;s<t(this,v).length;s++){const i=t(this,v)[s];typeof i.render=="function"&&i.render(e)}});c(this,"handleResize",()=>{for(let e=0;e<t(this,v).length;e++){const s=t(this,v)[e];typeof s.resize=="function"&&s.resize()}});c(this,"handleMouseMove",e=>{for(let s=0;s<t(this,v).length;s++){const i=t(this,v)[s];typeof i.mouseMove=="function"&&i.mouseMove(e)}});r(this,v,this.createComponents()),r(this,U,this.createDebugger()),this.events()}createComponents(){const e=[];document.querySelectorAll(".card").forEach((u,l)=>{const p=u.querySelector("canvas");e.push(new ee({el:p,src:ne[l],index:l,guiObj:t(this,w)}));const B=u.querySelector(".text__words");e.push(new te(B,l))});const i=document.querySelector(".background__canvas");return e.push(new oe({el:i})),e}events(){f.ticker.add(this.handleRAF),window.addEventListener("resize",this.handleResize,!1),P()?window.addEventListener("touchmove",this.handleMouseMove,!1):window.addEventListener("mousemove",this.handleMouseMove,!1)}createDebugger(){const e=new V,s=()=>{for(let i=0;i<t(this,v).length;i++){const u=t(this,v)[i];u.type==="card"&&(u.program.uniforms.uRadius.value=t(this,w).radius,u.program.uniforms.uStrength.value=t(this,w).strength)}};return e.add(t(this,w),"radius",0,1).onChange(s),e.add(t(this,w),"strength",0,3).onChange(s),e}}v=new WeakMap,A=new WeakMap,w=new WeakMap,U=new WeakMap;new re;
