var z=Object.defineProperty;var P=(i,e,s)=>e in i?z(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var g=(i,e,s)=>(P(i,typeof e!="symbol"?e+"":e,s),s),I=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var t=(i,e,s)=>(I(i,e,"read from private field"),s?s.call(i):e.get(i)),a=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},h=(i,e,s,n)=>(I(i,e,"write to private field"),n?n.call(i,s):e.set(i,s),s);import{T as B,V as R,G as E,R as U,a as A,P as F,M as H,g as m}from"./index-9ea1868b.js";const G=`#define GLSLIFY 1
attribute vec2 uv;attribute vec2 position;uniform vec2 uResolution;uniform vec2 uTextureResolution;varying vec2 vUv;vec2 resizeUvCover(vec2 uv,vec2 size,vec2 resolution){vec2 ratio=vec2(min((resolution.x/resolution.y)/(size.x/size.y),1.0),min((resolution.y/resolution.x)/(size.y/size.x),1.0));return vec2(uv.x*ratio.x+(1.0-ratio.x)*0.5,uv.y*ratio.y+(1.0-ratio.y)*0.5);}void main(){vUv=resizeUvCover(uv,uTextureResolution,uResolution);gl_Position=vec4(position,0,1);}`,Y=`precision highp float;
#define GLSLIFY 1
uniform float uTime;uniform sampler2D uTexture;uniform vec2 uMouse;uniform vec2 uMouseIntro;uniform float uIntro;uniform float uRadius;uniform float uStrength;uniform float uBulge;varying vec2 vUv;vec2 bulge(vec2 uv,vec2 center){uv-=center;float dist=length(uv)/uRadius;float distPow=pow(dist,4.);float strengthAmount=uStrength/(1.0+distPow);uv*=(1.-uBulge)+uBulge*strengthAmount;uv+=center;return uv;}void main(){vec2 mixMouse=mix(uMouseIntro,uMouse,uIntro);vec2 bulgeUV=bulge(vUv,mixMouse);vec4 tex=texture2D(uTexture,bulgeUV);gl_FragColor.rgb=tex.rgb;gl_FragColor.a=1.0;}`;class q{constructor(){g(this,"load",(e,s)=>new Promise(n=>{const r=[];for(let l=0;l<e.length;l++){const{name:T,texture:C}=e[l];C&&!this.assets[T]&&r.push(this.loadTexture(C,T,s))}Promise.all(r).then(()=>n())}));this.assets={}}get(e){return this.assets[e]}loadTexture(e,s,n){return this.assets[s]||(this.assets[s]={}),new Promise(r=>{const l=new Image,T=new B(n);l.onload=()=>{T.image=l,this.assets[s]=T,r(l)},l.src=e})}}const b=new q;function S(){return"standalone"in navigator||window.matchMedia("(pointer: coarse)").matches?!0:window.matchMedia("(pointer: fine)").matches?!1:"ontouchstart"in window||navigator.maxTouchPoints>0}var o,f,y,u,c,w,p,M,L,v,x;class W{constructor(e,s,n){a(this,o,void 0);a(this,f,void 0);a(this,y,void 0);a(this,u,void 0);a(this,c,{bulge:0,strength:1.1,radius:.95,displacementMap:.3});a(this,w,new R(0,0));a(this,p,void 0);a(this,M,!0);a(this,L,void 0);a(this,v,void 0);a(this,x,void 0);g(this,"handleResize",()=>{const e=t(this,o).parentNode.offsetWidth,s=t(this,o).parentNode.offsetHeight;t(this,f).setSize(e,s),h(this,p,t(this,o).getBoundingClientRect()),t(this,u)&&(t(this,u).uniforms.uResolution.value=new R(e,s)),h(this,x,S())});g(this,"handleMouseMove",e=>{if(!t(this,M))return;h(this,p,t(this,o).getBoundingClientRect());let s=t(this,x)?e.touches[0].pageX:e.clientX,n=t(this,x)?e.touches[0].pageY:e.clientY;const r=(s-t(this,p).left)/t(this,o).offsetWidth,l=1-(n-t(this,p).top+window.scrollY)/t(this,o).offsetHeight;t(this,w).x=m.utils.clamp(0,1,r),t(this,w).y=m.utils.clamp(0,1,l)});g(this,"handleMouseEnter",()=>{var e;t(this,M)&&((e=this.tlBulge)==null||e.kill(),m.fromTo(t(this,u).uniforms.uBulge,{value:0},{value:1,duration:1,ease:"expo.out"}))});g(this,"handleMouseLeave",()=>{t(this,M)&&m.to(t(this,u).uniforms.uBulge,{value:0,duration:1,ease:"expo.out"})});g(this,"handleRAF",e=>{requestAnimationFrame(this.handleRAF),t(this,u).uniforms.uTime.value=e*.001,t(this,u).uniforms.uMouse.value=t(this,w),t(this,f).render({scene:t(this,y)})});h(this,o,e),h(this,L,s),h(this,v,n),this.setGUI(),this.setScene(),h(this,x,S()),console.log("demo 2")}setGUI(){const e=new E,s=()=>{t(this,u).uniforms.uRadius.value=t(this,c).radius,t(this,u).uniforms.uStrength.value=t(this,c).strength};e.add(t(this,c),"radius",0,1).onChange(s),e.add(t(this,c),"strength",0,3).onChange(s)}async setScene(){h(this,f,new U({dpr:Math.min(window.devicePixelRatio,2),canvas:t(this,o),width:t(this,o).offsetWidth,height:t(this,o).offsetHeight}));const{gl:e}=t(this,f);await b.load([{name:`image_${t(this,v)}`,texture:`./img/${t(this,L)}`}],e),e.clearColor(1,1,1,1),this.handleResize();const s=new A(e),n=b.get(`image_${t(this,v)}`);h(this,u,new F(e,{vertex:G,fragment:Y,uniforms:{uTime:{value:0},uTexture:{value:n},uTextureResolution:{value:new R(n.image.width,n.image.height)},uResolution:{value:new R(e.canvas.offsetWidth,e.canvas.offsetHeight)},uMouse:{value:t(this,w)},uMouseIntro:{value:new R(.5,0)},uIntro:{value:0},uBulge:{value:t(this,c).bulge},uRadius:{value:t(this,c).radius},uStrength:{value:t(this,c).strength}}})),h(this,y,new H(e,{geometry:s,program:t(this,u)})),this.events(),this.intro()}intro(){let e=0;t(this,v)===2?e=.25:t(this,v)===0&&(e=.5),m.delayedCall(e,()=>{t(this,o).parentNode.parentNode.classList.add("is-visible")}),this.tlBulge=m.fromTo(t(this,u).uniforms.uBulge,{value:2},{value:0,duration:2,ease:"expo.out",onComplete:()=>{},delay:e}),m.to(t(this,u).uniforms.uIntro,{value:1,duration:3,delay:e})}events(){window.addEventListener("resize",this.handleResize,!1),S()?window.addEventListener("touchmove",this.handleMouseMove,!1):window.addEventListener("mousemove",this.handleMouseMove,!1),t(this,o).addEventListener("mouseenter",this.handleMouseEnter,!1),t(this,o).addEventListener("mouseleave",this.handleMouseLeave,!1),requestAnimationFrame(this.handleRAF)}}o=new WeakMap,f=new WeakMap,y=new WeakMap,u=new WeakMap,c=new WeakMap,w=new WeakMap,p=new WeakMap,M=new WeakMap,L=new WeakMap,v=new WeakMap,x=new WeakMap;var d;class _{constructor(e){a(this,d,void 0);h(this,d,e),console.log(t(this,d));const s=t(this,d).innerHTML.split("");t(this,d).innerHTML="",s.forEach(n=>{const r=document.createElement("span");r.classList.add("char"),r.innerHTML=n,t(this,d).appendChild(r)})}}d=new WeakMap;const N=["image-7.jpg","image1.png","image-2.jpg"];document.querySelectorAll(".card-container").forEach((e,s)=>{const n=e.querySelector("canvas");new W(n,N[s],s);const r=e.querySelector(".text");new _(r,s)});
